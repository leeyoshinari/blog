<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>白瑜的博客</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <script src="/js/jquery.min.js"></script>
  <link rel="stylesheet" href="/css/font/result.css">
</head>
<body>
  <div class="l_body s:aa content tech" id="start" layout="post" >
    <aside class="l_left"></aside>
    <div class="l_main" id="main">
      <header class="header mobile-only"></header>
      <div class="article banner top"><div class="content"><div class="bottom only-title"><div class="text-area">
        <h1 class="text title"><span>做一个自己的领券网站</span></h1>
      </div><div class="publish-date"><span>发布时间：2024-06-08</span></div></div></div></div>
      <article class="md-text content">
        <h2 id="介绍">介绍</h2>
        <p>之前有写过一个<a href="/p/940241882.html">领优惠券的 APP</a>，因为淘宝和京东的接口升级，导致 APP 相关功能用不了，而我本地的 Android 开发环境已经删除了，重新搭建环境的成本比较高，而且电脑也有点带不动整套 Android 开发环境（如果你有 Android 开发环境，那么你可以试试修改代码），于是经过多方调研，决定做一个网站，复制 APP 的所有功能。</p>
        <img src="/img/couponApp/shopping.jpg" alt="" loading="lazy" />
        <p>选择做一个网站的原因是因为：</p>
        <p class="non-row md-indent">1、开发环境搭建简单，如有 bug 可随时修复</p>
        <p class="non-row md-indent">2、跨平台支持能力，不管是 Android、IOS 还是鸿蒙</p>
        <p class="non-row md-indent">3、可以把网站做成 PWA 应用，这样就可以像 APP 一样“安装”到手机上了</p>
        <p class="non-row md-indent">4、可以接入 Vercel 流水线自动部署，无需自己准备服务器部署网站</p>
        <p>但是，理想很美好，现实很骨感。由于 Google 的各种考量和限制，PWA 应用一旦“安装”到手机上，就无法跳转到第三方 APP 了，所以网站已经禁用了 PWA 安装的功能。</p>
        <h2 id="网站地址">网站地址</h2>
        <p><a href="https://shopping.ihuster.top">网站地址，建议用手机浏览器打开</a>，最好是手机自带的浏览器。</p>
        <h2 id="功能">功能</h2>
        <h3 id="搜索商品">搜索商品</h3>
        <p>可以先在淘宝、京东、拼多多等 APP 上查找自己需要购买的商品，然后复制商品名称，打开这个领券网站可以搜索商品，快速货比三家，比如前段时间我就发现拼多多的蓝月亮洗衣液的单价要比淘宝的贵两块钱，于是我就在淘宝上下单了。当然也存在搜不到商品的情况，原因是商家没有推广这个商品。</p>
        <p>如果没有输入搜索内容，默认显示各平台的每日热销榜，至于是不是真的热销我就不知道了。</p>
        <h3 id="领取优惠券">领取优惠券</h3>
        <p>有些商品，你在淘宝上搜索没有优惠券，在这里搜索也没有优惠券；有些商品，你在淘宝上搜索有优惠券，在这里搜索也是一样的优惠券；有些商品，你在淘宝上搜索没有优惠券，但是在这里搜索有优惠券；总之，不管怎样，还是能省那么一点点钱的（土豪请无视）。</p>
        <p>如果搜索出来的商品很多，可能不太容易找出自己想要的商品，那么可以按价格从低到高、销量从高到低、是否有优惠券排序。</p>
        <p>这里要说一下淘宝比较奇葩的规则：当搜索到的商品只有一个时，返回的数据中没有商品id和商品链接，只有当账号满足一定条件后才会返回所有数据；这时我就做了一个特殊处理：如果搜索到的商品只有一个，那么会用这个商品的店铺名再搜索一次，最后返回这个店铺的所有推广的商品，然后再去找一下需要购买的商品。</p>
        <h3 id="官方活动">官方活动</h3>
        <p>各平台官方活动，包括淘宝、京东、拼多多、饿了么、美团等，可以去活动页面领取官方红包。</p>
        <h2 id="APP跳转">APP跳转</h2>
        <p>打开网站领取优惠券购买商品时，会用浏览器打开链接，然后通过浏览器的外调能力拉起淘宝、京东、拼多多、美团等 APP 或提示安装 APP，这些行为都是浏览器的行为，这个网站只是告诉浏览器要做什么。</p>
        <h2 id="缓存数据">缓存数据</h2>
        <p>为了节省流量，商品列表中的图片采取懒加载方式，已加载的图片的缓存是浏览器的默认行为。</p>
        <h2 id="兼容性">兼容性</h2>
        <p>已在 Android 手机上完成调试，简单测试使用 华为、小米、oppo、vivo 的默认浏览器打开网站，可以唤起对应的 APP；苹果手机未充分测试，只可以唤起部分 APP。 如果不能唤起 APP，可尝试安装第三方浏览器，支持力度最好的浏览器是 Chrome 浏览器。</p>
        <h2 id="升级">升级</h2>
        <p>修改代码中的版本号，网站加载时会自动验证版本，如果网站的版本和本地缓存的版本不一致，就会重新加载网页。</p>
        <h2 id="部署到 Vercel">部署到 Vercel</h2>
        <p>有很多静态/动态代码托管网站，这里推荐使用 Vercel，它在国内访问速度还可以，唯一就是自动生成的域名国内无法访问，因此需要绑定一个域名，<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fleeyoshinari%2Fshopping&project-name=shopping&repository-name=shopping" target="_blank">点我立即开始部署</a></p>          
        <p>由于 Vercel 是美国的服务提供商，我们访问网站时，首先会去请求 Vercel 的服务，Vercel 转发请求到淘宝、京东等服务，获取到结果后再返回到 Vercel 的服务，然后才会返回到自己的浏览器上并展示出来，所以网站的加载会比较慢。</p>
        <p>也可在其他代码托管网站部署，可自行探索。</p>
        <hr style="margin-top: 3em;">
        <div class="article-footer fs14"></div>
      </article>
      <footer class="page-footer footnote"><hr></footer>
      <div class="main-mask" onclick="sidebar.dismiss()"></div>
    </div>
    <aside class="l_right"></aside>
  </div>
</body>
<script type="module">
  import { createLeft, createFootNote, createMobileHeader, createDonate, createRight, createFloatPanel } from '/js/template.js';
  document.getElementsByClassName('l_left')[0].appendChild(createLeft());
  document.getElementsByClassName('header mobile-only')[0].appendChild(createMobileHeader());
  document.getElementsByClassName('article-footer fs14')[0].appendChild(createDonate());
  document.getElementsByClassName('page-footer footnote')[0].appendChild(createFootNote());
  document.getElementsByClassName('l_right')[0].appendChild(createRight());
  document.getElementById('start').appendChild(createFloatPanel());
</script>
<script type="text/javascript" src="/js/main.js"></script>
</html>
